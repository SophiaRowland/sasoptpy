proc optmodel;
var isOpen {{'mine1','mine2','mine3','mine4'}, {1,2,3,4,5}} binary;
var isWorked {{'mine1','mine2','mine3','mine4'}, {1,2,3,4,5}} binary;
var extract {{'mine1','mine2','mine3','mine4'}, {1,2,3,4,5}} >= 0;
extract['mine1', 1].ub = 2.0;
extract['mine1', 2].ub = 2.0;
extract['mine1', 3].ub = 2.0;
extract['mine1', 4].ub = 2.0;
extract['mine1', 5].ub = 2.0;
extract['mine2', 1].ub = 2.5;
extract['mine2', 2].ub = 2.5;
extract['mine2', 3].ub = 2.5;
extract['mine2', 4].ub = 2.5;
extract['mine2', 5].ub = 2.5;
extract['mine3', 1].ub = 1.3;
extract['mine3', 2].ub = 1.3;
extract['mine3', 3].ub = 1.3;
extract['mine3', 4].ub = 1.3;
extract['mine3', 5].ub = 1.3;
extract['mine4', 1].ub = 3.0;
extract['mine4', 2].ub = 3.0;
extract['mine4', 3].ub = 3.0;
extract['mine4', 4].ub = 3.0;
extract['mine4', 5].ub = 3.0;
max totalProfit = 10.0 * extract['mine1', 1] + 10.0 * extract['mine2', 1] + 10.0 * extract['mine3', 1] + 10.0 * extract['mine4', 1] + 9.090909090909 * extract['mine1', 2] + 9.090909090909 * extract['mine2', 2] + 9.090909090909 * extract['mine3', 2] + 9.090909090909 * extract['mine4', 2] + 8.264462809917 * extract['mine1', 3] + 8.264462809917 * extract['mine2', 3] + 8.264462809917 * extract['mine3', 3] + 8.264462809917 * extract['mine4', 3] + 7.513148009016 * extract['mine1', 4] + 7.513148009016 * extract['mine2', 4] + 7.513148009016 * extract['mine3', 4] + 7.513148009016 * extract['mine4', 4] + 6.830134553651 * extract['mine1', 5] + 6.830134553651 * extract['mine2', 5] + 6.830134553651 * extract['mine3', 5] + 6.830134553651 * extract['mine4', 5] - 5.0 * isOpen['mine1', 1] - 4.545454545455 * isOpen['mine1', 2] - 4.132231404959 * isOpen['mine1', 3] - 3.756574004508 * isOpen['mine1', 4] - 3.415067276825 * isOpen['mine1', 5] - 4.0 * isOpen['mine2', 1] - 3.636363636364 * isOpen['mine2', 2] - 3.305785123967 * isOpen['mine2', 3] - 3.005259203606 * isOpen['mine2', 4] - 2.73205382146 * isOpen['mine2', 5] - 4.0 * isOpen['mine3', 1] - 3.636363636364 * isOpen['mine3', 2] - 3.305785123967 * isOpen['mine3', 3] - 3.005259203606 * isOpen['mine3', 4] - 2.73205382146 * isOpen['mine3', 5] - 5.0 * isOpen['mine4', 1] - 4.545454545455 * isOpen['mine4', 2] - 4.132231404959 * isOpen['mine4', 3] - 3.756574004508 * isOpen['mine4', 4] - 3.415067276825 * isOpen['mine4', 5];
con link_mine1_1 : extract['mine1', 1] - 2.0 * isWorked['mine1', 1] <= 0.0;
con link_mine1_2 : extract['mine1', 2] - 2.0 * isWorked['mine1', 2] <= 0.0;
con link_mine1_3 : extract['mine1', 3] - 2.0 * isWorked['mine1', 3] <= 0.0;
con link_mine1_4 : extract['mine1', 4] - 2.0 * isWorked['mine1', 4] <= 0.0;
con link_mine1_5 : extract['mine1', 5] - 2.0 * isWorked['mine1', 5] <= 0.0;
con link_mine2_1 : extract['mine2', 1] - 2.5 * isWorked['mine2', 1] <= 0.0;
con link_mine2_2 : extract['mine2', 2] - 2.5 * isWorked['mine2', 2] <= 0.0;
con link_mine2_3 : extract['mine2', 3] - 2.5 * isWorked['mine2', 3] <= 0.0;
con link_mine2_4 : extract['mine2', 4] - 2.5 * isWorked['mine2', 4] <= 0.0;
con link_mine2_5 : extract['mine2', 5] - 2.5 * isWorked['mine2', 5] <= 0.0;
con link_mine3_1 : extract['mine3', 1] - 1.3 * isWorked['mine3', 1] <= 0.0;
con link_mine3_2 : extract['mine3', 2] - 1.3 * isWorked['mine3', 2] <= 0.0;
con link_mine3_3 : extract['mine3', 3] - 1.3 * isWorked['mine3', 3] <= 0.0;
con link_mine3_4 : extract['mine3', 4] - 1.3 * isWorked['mine3', 4] <= 0.0;
con link_mine3_5 : extract['mine3', 5] - 1.3 * isWorked['mine3', 5] <= 0.0;
con link_mine4_1 : extract['mine4', 1] - 3.0 * isWorked['mine4', 1] <= 0.0;
con link_mine4_2 : extract['mine4', 2] - 3.0 * isWorked['mine4', 2] <= 0.0;
con link_mine4_3 : extract['mine4', 3] - 3.0 * isWorked['mine4', 3] <= 0.0;
con link_mine4_4 : extract['mine4', 4] - 3.0 * isWorked['mine4', 4] <= 0.0;
con link_mine4_5 : extract['mine4', 5] - 3.0 * isWorked['mine4', 5] <= 0.0;

con cardinality_1 : isWorked['mine1', 1] + isWorked['mine2', 1] + isWorked['mine3', 1] + isWorked['mine4', 1] <= 3;
con cardinality_2 : isWorked['mine1', 2] + isWorked['mine2', 2] + isWorked['mine3', 2] + isWorked['mine4', 2] <= 3;
con cardinality_3 : isWorked['mine1', 3] + isWorked['mine2', 3] + isWorked['mine3', 3] + isWorked['mine4', 3] <= 3;
con cardinality_4 : isWorked['mine1', 4] + isWorked['mine2', 4] + isWorked['mine3', 4] + isWorked['mine4', 4] <= 3;
con cardinality_5 : isWorked['mine1', 5] + isWorked['mine2', 5] + isWorked['mine3', 5] + isWorked['mine4', 5] <= 3;

con worked_implies_open_mine1_1 : isWorked['mine1', 1] - isOpen['mine1', 1] <= 0;
con worked_implies_open_mine1_2 : isWorked['mine1', 2] - isOpen['mine1', 2] <= 0;
con worked_implies_open_mine1_3 : isWorked['mine1', 3] - isOpen['mine1', 3] <= 0;
con worked_implies_open_mine1_4 : isWorked['mine1', 4] - isOpen['mine1', 4] <= 0;
con worked_implies_open_mine1_5 : isWorked['mine1', 5] - isOpen['mine1', 5] <= 0;
con worked_implies_open_mine2_1 : isWorked['mine2', 1] - isOpen['mine2', 1] <= 0;
con worked_implies_open_mine2_2 : isWorked['mine2', 2] - isOpen['mine2', 2] <= 0;
con worked_implies_open_mine2_3 : isWorked['mine2', 3] - isOpen['mine2', 3] <= 0;
con worked_implies_open_mine2_4 : isWorked['mine2', 4] - isOpen['mine2', 4] <= 0;
con worked_implies_open_mine2_5 : isWorked['mine2', 5] - isOpen['mine2', 5] <= 0;
con worked_implies_open_mine3_1 : isWorked['mine3', 1] - isOpen['mine3', 1] <= 0;
con worked_implies_open_mine3_2 : isWorked['mine3', 2] - isOpen['mine3', 2] <= 0;
con worked_implies_open_mine3_3 : isWorked['mine3', 3] - isOpen['mine3', 3] <= 0;
con worked_implies_open_mine3_4 : isWorked['mine3', 4] - isOpen['mine3', 4] <= 0;
con worked_implies_open_mine3_5 : isWorked['mine3', 5] - isOpen['mine3', 5] <= 0;
con worked_implies_open_mine4_1 : isWorked['mine4', 1] - isOpen['mine4', 1] <= 0;
con worked_implies_open_mine4_2 : isWorked['mine4', 2] - isOpen['mine4', 2] <= 0;
con worked_implies_open_mine4_3 : isWorked['mine4', 3] - isOpen['mine4', 3] <= 0;
con worked_implies_open_mine4_4 : isWorked['mine4', 4] - isOpen['mine4', 4] <= 0;
con worked_implies_open_mine4_5 : isWorked['mine4', 5] - isOpen['mine4', 5] <= 0;

con continuity_mine1_2 : isOpen['mine1', 2] - isOpen['mine1', 1] <= 0;
con continuity_mine1_3 : isOpen['mine1', 3] - isOpen['mine1', 2] <= 0;
con continuity_mine1_4 : isOpen['mine1', 4] - isOpen['mine1', 3] <= 0;
con continuity_mine1_5 : isOpen['mine1', 5] - isOpen['mine1', 4] <= 0;
con continuity_mine2_2 : isOpen['mine2', 2] - isOpen['mine2', 1] <= 0;
con continuity_mine2_3 : isOpen['mine2', 3] - isOpen['mine2', 2] <= 0;
con continuity_mine2_4 : isOpen['mine2', 4] - isOpen['mine2', 3] <= 0;
con continuity_mine2_5 : isOpen['mine2', 5] - isOpen['mine2', 4] <= 0;
con continuity_mine3_2 : isOpen['mine3', 2] - isOpen['mine3', 1] <= 0;
con continuity_mine3_3 : isOpen['mine3', 3] - isOpen['mine3', 2] <= 0;
con continuity_mine3_4 : isOpen['mine3', 4] - isOpen['mine3', 3] <= 0;
con continuity_mine3_5 : isOpen['mine3', 5] - isOpen['mine3', 4] <= 0;
con continuity_mine4_2 : isOpen['mine4', 2] - isOpen['mine4', 1] <= 0;
con continuity_mine4_3 : isOpen['mine4', 3] - isOpen['mine4', 2] <= 0;
con continuity_mine4_4 : isOpen['mine4', 4] - isOpen['mine4', 3] <= 0;
con continuity_mine4_5 : isOpen['mine4', 5] - isOpen['mine4', 4] <= 0;

con quality_con_1 : 0.1 * extract['mine1', 1] - 0.2 * extract['mine2', 1] + 0.6 * extract['mine3', 1] - 0.4 * extract['mine4', 1] = 0.0;
con quality_con_2 : 0.2 * extract['mine1', 2] - 0.1 * extract['mine2', 2] + 0.7 * extract['mine3', 2] - 0.3 * extract['mine4', 2] = 0.0;
con quality_con_3 : - 0.2 * extract['mine1', 3] - 0.5 * extract['mine2', 3] + 0.3 * extract['mine3', 3] - 0.7 * extract['mine4', 3] = 0.0;
con quality_con_4 : 0.4 * extract['mine1', 4] + 0.1 * extract['mine2', 4] + 0.9 * extract['mine3', 4] - 0.1 * extract['mine4', 4] = 0.0;
con quality_con_5 : - 0.3 * extract['mine2', 5] + 0.5 * extract['mine3', 5] - 0.5 * extract['mine4', 5] = 0.0;

solve;
quit;